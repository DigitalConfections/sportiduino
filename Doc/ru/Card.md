# Чипы

Система отметки поддерживает следующие типы чипов:
- [Mifare Classic Mini](http://www.engracetech.com/wp-content/uploads/2014/03/NXP-Mifare-MF1ICS20.pdf) = 9 отметок
- [Mifare Classic 1K](https://www.nxp.com/docs/en/data-sheet/MF1S50YYX_V1.pdf) = 42 отметки
- [Mifare Classic 4K](https://www.nxp.com/docs/en/data-sheet/MF1S70YYX_V1.pdf) = 90 отметок
- [Ntag213/215/216](https://www.nxp.com/docs/en/data-sheet/NTAG213_215_216.pdf) = 32/120/216 отметок

Тип используемых чипов система определяет автоматически и может одновременно работать с разными типами чипов!

Рекомендуется использовать чипы Ntag213/215/216. В виде наклеек данные чипы стоят 6/12/20 рублей, в виде брелков в два раза дороже.

<b>Важно!</b> Для надежной работы с данными чипами, которые обладают небольшой по площади антентой (как приведенные ниже брелки)
необходимо заменить индуктивности на более мощные в плате RFID RC522 (описано на странице [Сборка станции отметки](/Doc/ru/BaseStationAssembly.md).

Чипы Mifare Classic 1K идут в комплекте с модулем RC522. Памяти данных чипов хватает на 42 отметки. Работают чуть медленнее Ntag. Память чипов Mifare используется лишь на четверть, так как в их структуре реализованы страницы длиной 16 байт. И при более плотной записи есть риск потери данных. Структура записи аналогичная Ntag.

![](/Images/Chip.JPG?raw=true)

Память чипов Ntag 213/215/216 разделена структурно на 45/135/231 страниц, в каждой из которых содержится по 4 байта. В первых 4-ех страницах содержится UID и другая служебная информация. Также служебная информация содержится в последних 5 страницах. Таким образом, для записи остается 36/126/222 страниц.

Структура записи представлена ниже. 4-7 страницы зарезервированы, остальные страницы для отметки. В 4-ой странице в первых двух байтах содержится программируемый номер чипа. Далее в третьем байте содержится информация по типу чипа: 3 - Ntag213, 5 - Ntag 215, 6 - Ntag 216, выставляется автоматически. В 4-ом байте версия прошивки. На пятой странице время инициализации чипа в формате unixtime (с помощью неё можно восстановить первый байт времени в отметках). Далее две страницы резерва для реализации дополнительных функций на отдельных стартах. Запись отметки на станции занимает отдельную страницу, в первый байт которой записывается номер станции, в остальные три байта - младшие байты текущего времени в unixtime (полное время затем восстанавливается, используя время инициализации, записанное в 5-ую страницу).

![](/Images/Ntag.JPG?raw=true)

У чипов для программирования станций структура отличается. Станция узнаёт их по числу 255, записанному в третий байт 4-ой страницы. Существует 6 разных мастер чипов: времени, номера, сна, настроек, дампа и информации. Ниже представлена их структура:

![](/Images/Master-Ntag.JPG?raw=true)